\section{liblzma/lz/lz\+\_\+encoder.c File Reference}
\label{lz__encoder_8c}\index{liblzma/lz/lz\+\_\+encoder.\+c@{liblzma/lz/lz\+\_\+encoder.\+c}}


LZ in window.  


{\ttfamily \#include \char`\"{}lz\+\_\+encoder.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lz\+\_\+encoder\+\_\+hash.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}memcmplen.\+h\char`\"{}}\newline
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ lzma\+\_\+coder}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \textbf{ move\+\_\+window} (\textbf{ lzma\+\_\+mf} $\ast$mf)
\begin{DoxyCompactList}\small\item\em Moves the data in the input window to free space for new data. \end{DoxyCompactList}\item 
static \textbf{ lzma\+\_\+ret} \textbf{ fill\+\_\+window} (\textbf{ lzma\+\_\+coder} $\ast$coder, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const uint8\+\_\+t $\ast$in, size\+\_\+t $\ast$in\+\_\+pos, size\+\_\+t in\+\_\+size, \textbf{ lzma\+\_\+action} action)
\begin{DoxyCompactList}\small\item\em Tries to fill the input window (mf-\/$>$buffer) \end{DoxyCompactList}\item 
\mbox{\label{lz__encoder_8c_a7cbe9acd33a8d9006e85d00c60a448e9}} 
static \textbf{ lzma\+\_\+ret} {\bfseries lz\+\_\+encode} (void $\ast$coder\+\_\+ptr, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const uint8\+\_\+t $\ast$restrict in, size\+\_\+t $\ast$restrict in\+\_\+pos, size\+\_\+t in\+\_\+size, uint8\+\_\+t $\ast$restrict out, size\+\_\+t $\ast$restrict out\+\_\+pos, size\+\_\+t out\+\_\+size, \textbf{ lzma\+\_\+action} action)
\item 
\mbox{\label{lz__encoder_8c_ad7db5539ffefad96f82eee5547bfc50e}} 
static bool {\bfseries lz\+\_\+encoder\+\_\+prepare} (\textbf{ lzma\+\_\+mf} $\ast$mf, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const \textbf{ lzma\+\_\+lz\+\_\+options} $\ast$lz\+\_\+options)
\item 
\mbox{\label{lz__encoder_8c_ab95e6dd72dc5508f2c33fd1a695b556d}} 
static bool {\bfseries lz\+\_\+encoder\+\_\+init} (\textbf{ lzma\+\_\+mf} $\ast$mf, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const \textbf{ lzma\+\_\+lz\+\_\+options} $\ast$lz\+\_\+options)
\item 
\mbox{\label{lz__encoder_8c_aa3748d94a78e951b0a2f3e38c21e8049}} 
uint64\+\_\+t {\bfseries lzma\+\_\+lz\+\_\+encoder\+\_\+memusage} (const \textbf{ lzma\+\_\+lz\+\_\+options} $\ast$lz\+\_\+options)
\item 
\mbox{\label{lz__encoder_8c_a934bb8b94afb89859c915ef5d11bd7cd}} 
static void {\bfseries lz\+\_\+encoder\+\_\+end} (void $\ast$coder\+\_\+ptr, const \textbf{ lzma\+\_\+allocator} $\ast$allocator)
\item 
\mbox{\label{lz__encoder_8c_a55de0453b1b1f8f94eb0a33facb93c56}} 
static \textbf{ lzma\+\_\+ret} {\bfseries lz\+\_\+encoder\+\_\+update} (void $\ast$coder\+\_\+ptr, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const \textbf{ lzma\+\_\+filter} $\ast$filters\+\_\+null \textbf{ lzma\+\_\+attribute}((\+\_\+\+\_\+unused\+\_\+\+\_\+)), const \textbf{ lzma\+\_\+filter} $\ast$reversed\+\_\+filters)
\item 
\mbox{\label{lz__encoder_8c_adc2df5d5f56b80e7a7431e172b44c972}} 
\textbf{ lzma\+\_\+ret} {\bfseries lzma\+\_\+lz\+\_\+encoder\+\_\+init} (\textbf{ lzma\+\_\+next\+\_\+coder} $\ast$next, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const \textbf{ lzma\+\_\+filter\+\_\+info} $\ast$\textbf{ filters}, \textbf{ lzma\+\_\+ret}($\ast$lz\+\_\+init)(\textbf{ lzma\+\_\+lz\+\_\+encoder} $\ast$lz, const \textbf{ lzma\+\_\+allocator} $\ast$allocator, const void $\ast$options, \textbf{ lzma\+\_\+lz\+\_\+options} $\ast$lz\+\_\+options))
\item 
\textbf{ lzma\+\_\+bool} \textbf{ lzma\+\_\+mf\+\_\+is\+\_\+supported} (\textbf{ lzma\+\_\+match\+\_\+finder} mf)
\begin{DoxyCompactList}\small\item\em Test if given match finder is supported. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
LZ in window. 



\subsection{Function Documentation}
\mbox{\label{lz__encoder_8c_a0ffebd3acf94a8ae2aecd13872bf9ce6}} 
\index{lz\+\_\+encoder.\+c@{lz\+\_\+encoder.\+c}!move\+\_\+window@{move\+\_\+window}}
\index{move\+\_\+window@{move\+\_\+window}!lz\+\_\+encoder.\+c@{lz\+\_\+encoder.\+c}}
\subsubsection{move\+\_\+window()}
{\footnotesize\ttfamily static void move\+\_\+window (\begin{DoxyParamCaption}\item[{\textbf{ lzma\+\_\+mf} $\ast$}]{mf }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Moves the data in the input window to free space for new data. 

mf-\/$>$buffer is a sliding input window, which keeps mf-\/$>$keep\+\_\+size\+\_\+before bytes of input history available all the time. Now and then we need to \char`\"{}slide\char`\"{} the buffer to make space for the new data to the end of the buffer. At the same time, data older than keep\+\_\+size\+\_\+before is dropped. \mbox{\label{lz__encoder_8c_af003fd0d53736a94b735eb04299ce08b}} 
\index{lz\+\_\+encoder.\+c@{lz\+\_\+encoder.\+c}!fill\+\_\+window@{fill\+\_\+window}}
\index{fill\+\_\+window@{fill\+\_\+window}!lz\+\_\+encoder.\+c@{lz\+\_\+encoder.\+c}}
\subsubsection{fill\+\_\+window()}
{\footnotesize\ttfamily static \textbf{ lzma\+\_\+ret} fill\+\_\+window (\begin{DoxyParamCaption}\item[{\textbf{ lzma\+\_\+coder} $\ast$}]{coder,  }\item[{const \textbf{ lzma\+\_\+allocator} $\ast$}]{allocator,  }\item[{const uint8\+\_\+t $\ast$}]{in,  }\item[{size\+\_\+t $\ast$}]{in\+\_\+pos,  }\item[{size\+\_\+t}]{in\+\_\+size,  }\item[{\textbf{ lzma\+\_\+action}}]{action }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Tries to fill the input window (mf-\/$>$buffer) 

If we are the last encoder in the chain, our input data is in in[]. Otherwise we call the next filter in the chain to process in[] and write its output to mf-\/$>$buffer.

This function must not be called once it has returned L\+Z\+M\+A\+\_\+\+S\+T\+R\+E\+A\+M\+\_\+\+E\+ND. \mbox{\label{lz__encoder_8c_a98a84efebf5e7ff1e8ddb821fc676d3f}} 
\index{lz\+\_\+encoder.\+c@{lz\+\_\+encoder.\+c}!lzma\+\_\+mf\+\_\+is\+\_\+supported@{lzma\+\_\+mf\+\_\+is\+\_\+supported}}
\index{lzma\+\_\+mf\+\_\+is\+\_\+supported@{lzma\+\_\+mf\+\_\+is\+\_\+supported}!lz\+\_\+encoder.\+c@{lz\+\_\+encoder.\+c}}
\subsubsection{lzma\+\_\+mf\+\_\+is\+\_\+supported()}
{\footnotesize\ttfamily \textbf{ lzma\+\_\+bool} lzma\+\_\+mf\+\_\+is\+\_\+supported (\begin{DoxyParamCaption}\item[{\textbf{ lzma\+\_\+match\+\_\+finder}}]{match\+\_\+finder }\end{DoxyParamCaption}) const}



Test if given match finder is supported. 

Return true if the given match finder is supported by this liblzma build. Otherwise false is returned. It is safe to call this with a value that isn\textquotesingle{}t listed in lzma\+\_\+match\+\_\+finder enumeration; the return value will be false.

There is no way to list which match finders are available in this particular liblzma version and build. It would be useless, because a new match finder, which the application developer wasn\textquotesingle{}t aware, could require giving additional options to the encoder that the older match finders don\textquotesingle{}t need. 

References L\+Z\+M\+A\+\_\+\+M\+F\+\_\+\+B\+T2, L\+Z\+M\+A\+\_\+\+M\+F\+\_\+\+B\+T3, L\+Z\+M\+A\+\_\+\+M\+F\+\_\+\+B\+T4, L\+Z\+M\+A\+\_\+\+M\+F\+\_\+\+H\+C3, and L\+Z\+M\+A\+\_\+\+M\+F\+\_\+\+H\+C4.

