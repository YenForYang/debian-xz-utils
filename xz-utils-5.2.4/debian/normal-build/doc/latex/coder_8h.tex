\section{xz/coder.h File Reference}
\label{coder_8h}\index{xz/coder.\+h@{xz/coder.\+h}}


Compresses or uncompresses a file.  


\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{coder_8h_a3e92f146bc3099bf9cae4d78234ec09e}} 
enum {\bfseries operation\+\_\+mode} \{ {\bfseries M\+O\+D\+E\+\_\+\+C\+O\+M\+P\+R\+E\+SS}, 
{\bfseries M\+O\+D\+E\+\_\+\+D\+E\+C\+O\+M\+P\+R\+E\+SS}, 
{\bfseries M\+O\+D\+E\+\_\+\+T\+E\+ST}, 
{\bfseries M\+O\+D\+E\+\_\+\+L\+I\+ST}
 \}
\item 
\mbox{\label{coder_8h_aae6f4ce90ec13c63185a05d62ed7e5e7}} 
enum {\bfseries format\+\_\+type} \{ {\bfseries F\+O\+R\+M\+A\+T\+\_\+\+A\+U\+TO}, 
{\bfseries F\+O\+R\+M\+A\+T\+\_\+\+XZ}, 
{\bfseries F\+O\+R\+M\+A\+T\+\_\+\+L\+Z\+MA}, 
{\bfseries F\+O\+R\+M\+A\+T\+\_\+\+R\+AW}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ coder\+\_\+set\+\_\+check} (\textbf{ lzma\+\_\+check} \textbf{ check})
\begin{DoxyCompactList}\small\item\em Set the integrity check type used when compressing. \end{DoxyCompactList}\item 
void \textbf{ coder\+\_\+set\+\_\+preset} (uint32\+\_\+t new\+\_\+preset)
\begin{DoxyCompactList}\small\item\em Set preset number. \end{DoxyCompactList}\item 
void \textbf{ coder\+\_\+set\+\_\+extreme} (void)
\begin{DoxyCompactList}\small\item\em Enable extreme mode. \end{DoxyCompactList}\item 
void \textbf{ coder\+\_\+add\+\_\+filter} (\textbf{ lzma\+\_\+vli} \textbf{ id}, void $\ast$options)
\begin{DoxyCompactList}\small\item\em Add a filter to the custom filter chain. \end{DoxyCompactList}\item 
\mbox{\label{coder_8h_a3193f23226c22454f435f2671874a507}} 
void {\bfseries coder\+\_\+set\+\_\+compression\+\_\+settings} (void)
\item 
void \textbf{ coder\+\_\+run} (const char $\ast$\textbf{ filename})
\begin{DoxyCompactList}\small\item\em Compress or decompress the given file. \end{DoxyCompactList}\item 
void \textbf{ coder\+\_\+free} (void)
\begin{DoxyCompactList}\small\item\em Free the memory allocated for the coder and kill the worker threads. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
enum operation\+\_\+mode \textbf{ opt\+\_\+mode}
\item 
enum format\+\_\+type \textbf{ opt\+\_\+format}
\item 
bool \textbf{ opt\+\_\+auto\+\_\+adjust}
\item 
bool \textbf{ opt\+\_\+single\+\_\+stream}
\begin{DoxyCompactList}\small\item\em If true, stop after decoding the first stream. \end{DoxyCompactList}\item 
uint64\+\_\+t \textbf{ opt\+\_\+block\+\_\+size}
\item 
uint64\+\_\+t $\ast$ \textbf{ opt\+\_\+block\+\_\+list}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Compresses or uncompresses a file. 



\subsection{Function Documentation}
\mbox{\label{coder_8h_a9536eb76947d3b4b3f6b8399b96f2b42}} 
\index{coder.\+h@{coder.\+h}!coder\+\_\+set\+\_\+check@{coder\+\_\+set\+\_\+check}}
\index{coder\+\_\+set\+\_\+check@{coder\+\_\+set\+\_\+check}!coder.\+h@{coder.\+h}}
\subsubsection{coder\+\_\+set\+\_\+check()}
{\footnotesize\ttfamily void coder\+\_\+set\+\_\+check (\begin{DoxyParamCaption}\item[{\textbf{ lzma\+\_\+check}}]{check }\end{DoxyParamCaption})}



Set the integrity check type used when compressing. 



References check, and check\+\_\+default.

\mbox{\label{coder_8h_aeacfa6d5e4a572118644c263e6bd6242}} 
\index{coder.\+h@{coder.\+h}!coder\+\_\+set\+\_\+preset@{coder\+\_\+set\+\_\+preset}}
\index{coder\+\_\+set\+\_\+preset@{coder\+\_\+set\+\_\+preset}!coder.\+h@{coder.\+h}}
\subsubsection{coder\+\_\+set\+\_\+preset()}
{\footnotesize\ttfamily void coder\+\_\+set\+\_\+preset (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{new\+\_\+preset }\end{DoxyParamCaption})}



Set preset number. 



References L\+Z\+M\+A\+\_\+\+P\+R\+E\+S\+E\+T\+\_\+\+L\+E\+V\+E\+L\+\_\+\+M\+A\+SK, and preset\+\_\+number.

\mbox{\label{coder_8h_a260615621b13619f4e27e82ac58722dd}} 
\index{coder.\+h@{coder.\+h}!coder\+\_\+set\+\_\+extreme@{coder\+\_\+set\+\_\+extreme}}
\index{coder\+\_\+set\+\_\+extreme@{coder\+\_\+set\+\_\+extreme}!coder.\+h@{coder.\+h}}
\subsubsection{coder\+\_\+set\+\_\+extreme()}
{\footnotesize\ttfamily void coder\+\_\+set\+\_\+extreme (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Enable extreme mode. 



References L\+Z\+M\+A\+\_\+\+P\+R\+E\+S\+E\+T\+\_\+\+E\+X\+T\+R\+E\+ME, and preset\+\_\+number.

\mbox{\label{coder_8h_a8884012fc28d467d3429070f270f7171}} 
\index{coder.\+h@{coder.\+h}!coder\+\_\+add\+\_\+filter@{coder\+\_\+add\+\_\+filter}}
\index{coder\+\_\+add\+\_\+filter@{coder\+\_\+add\+\_\+filter}!coder.\+h@{coder.\+h}}
\subsubsection{coder\+\_\+add\+\_\+filter()}
{\footnotesize\ttfamily void coder\+\_\+add\+\_\+filter (\begin{DoxyParamCaption}\item[{\textbf{ lzma\+\_\+vli}}]{id,  }\item[{void $\ast$}]{options }\end{DoxyParamCaption})}



Add a filter to the custom filter chain. 



References filters\+\_\+count, L\+Z\+M\+A\+\_\+\+F\+I\+L\+T\+E\+R\+S\+\_\+\+M\+AX, and message\+\_\+fatal().

\mbox{\label{coder_8h_acbe7065d22ed54ab19a1a9bb0cb808de}} 
\index{coder.\+h@{coder.\+h}!coder\+\_\+run@{coder\+\_\+run}}
\index{coder\+\_\+run@{coder\+\_\+run}!coder.\+h@{coder.\+h}}
\subsubsection{coder\+\_\+run()}
{\footnotesize\ttfamily void coder\+\_\+run (\begin{DoxyParamCaption}\item[{const char $\ast$}]{filename }\end{DoxyParamCaption})}



Compress or decompress the given file. 



References io\+\_\+open\+\_\+src(), message\+\_\+filename(), and opt\+\_\+mode.

\mbox{\label{coder_8h_a046610a034f1ae8d3bb152e8e2bde7c7}} 
\index{coder.\+h@{coder.\+h}!coder\+\_\+free@{coder\+\_\+free}}
\index{coder\+\_\+free@{coder\+\_\+free}!coder.\+h@{coder.\+h}}
\subsubsection{coder\+\_\+free()}
{\footnotesize\ttfamily void coder\+\_\+free (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Free the memory allocated for the coder and kill the worker threads. 



References lzma\+\_\+end().



\subsection{Variable Documentation}
\mbox{\label{coder_8h_aed58b2945b6b414405af58615ca823b6}} 
\index{coder.\+h@{coder.\+h}!opt\+\_\+mode@{opt\+\_\+mode}}
\index{opt\+\_\+mode@{opt\+\_\+mode}!coder.\+h@{coder.\+h}}
\subsubsection{opt\+\_\+mode}
{\footnotesize\ttfamily enum operation\+\_\+mode opt\+\_\+mode}

Operation mode of the command line tool. This is set in \doxyref{args.\+c}{p.}{args_8c} and read in several files. 

Referenced by coder\+\_\+init(), coder\+\_\+run(), message\+\_\+filename(), message\+\_\+mem\+\_\+needed(), and mytime\+\_\+get\+\_\+flush\+\_\+timeout().

\mbox{\label{coder_8h_a86110016dfb55682abf8a2b25927c3fc}} 
\index{coder.\+h@{coder.\+h}!opt\+\_\+format@{opt\+\_\+format}}
\index{opt\+\_\+format@{opt\+\_\+format}!coder.\+h@{coder.\+h}}
\subsubsection{opt\+\_\+format}
{\footnotesize\ttfamily enum format\+\_\+type opt\+\_\+format}

File format to use when encoding or what format(s) to accept when decoding. This is a global because it\textquotesingle{}s needed also in \doxyref{suffix.\+c}{p.}{suffix_8c}. This is set in \doxyref{args.\+c}{p.}{args_8c}. 

Referenced by list\+\_\+file(), and uncompressed\+\_\+name().

\mbox{\label{coder_8h_ad6884beb1efb0650651a2d29b31aa486}} 
\index{coder.\+h@{coder.\+h}!opt\+\_\+auto\+\_\+adjust@{opt\+\_\+auto\+\_\+adjust}}
\index{opt\+\_\+auto\+\_\+adjust@{opt\+\_\+auto\+\_\+adjust}!coder.\+h@{coder.\+h}}
\subsubsection{opt\+\_\+auto\+\_\+adjust}
{\footnotesize\ttfamily bool opt\+\_\+auto\+\_\+adjust}

If true, the compression settings are automatically adjusted down if they exceed the memory usage limit. \mbox{\label{coder_8h_acd019d002c1904bffdeca838b422235a}} 
\index{coder.\+h@{coder.\+h}!opt\+\_\+single\+\_\+stream@{opt\+\_\+single\+\_\+stream}}
\index{opt\+\_\+single\+\_\+stream@{opt\+\_\+single\+\_\+stream}!coder.\+h@{coder.\+h}}
\subsubsection{opt\+\_\+single\+\_\+stream}
{\footnotesize\ttfamily bool opt\+\_\+single\+\_\+stream}



If true, stop after decoding the first stream. 

\mbox{\label{coder_8h_ae2cc49eea149f63558415d0883339595}} 
\index{coder.\+h@{coder.\+h}!opt\+\_\+block\+\_\+size@{opt\+\_\+block\+\_\+size}}
\index{opt\+\_\+block\+\_\+size@{opt\+\_\+block\+\_\+size}!coder.\+h@{coder.\+h}}
\subsubsection{opt\+\_\+block\+\_\+size}
{\footnotesize\ttfamily uint64\+\_\+t opt\+\_\+block\+\_\+size}

If non-\/zero, start a new .xz Block after every opt\+\_\+block\+\_\+size bytes of input. This has an effect only when compressing to the .xz format. \mbox{\label{coder_8h_a15f96f9bd44c5b62bda3e1f81a05e4b3}} 
\index{coder.\+h@{coder.\+h}!opt\+\_\+block\+\_\+list@{opt\+\_\+block\+\_\+list}}
\index{opt\+\_\+block\+\_\+list@{opt\+\_\+block\+\_\+list}!coder.\+h@{coder.\+h}}
\subsubsection{opt\+\_\+block\+\_\+list}
{\footnotesize\ttfamily uint64\+\_\+t$\ast$ opt\+\_\+block\+\_\+list}

This is non-\/\+N\+U\+LL if --block-\/list was used. This contains the Block sizes as an array that is terminated with 0. 