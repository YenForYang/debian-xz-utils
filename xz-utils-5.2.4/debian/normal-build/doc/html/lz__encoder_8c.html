<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XZ Utils: liblzma/lz/lz_encoder.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XZ Utils
   &#160;<span id="projectnumber">5.2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2e0898c272e1f0f93c8ef15f5da2a912.html">liblzma</a></li><li class="navelem"><a class="el" href="dir_50b86e5c919915733207984a4aa1052b.html">lz</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lz_encoder.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>LZ in window.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="lz__encoder_8h.html">lz_encoder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lz__encoder__hash_8h.html">lz_encoder_hash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memcmplen_8h.html">memcmplen.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlzma__coder.html">lzma_coder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ffebd3acf94a8ae2aecd13872bf9ce6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lz__encoder_8c.html#a0ffebd3acf94a8ae2aecd13872bf9ce6">move_window</a> (<a class="el" href="structlzma__mf__s.html">lzma_mf</a> *mf)</td></tr>
<tr class="memdesc:a0ffebd3acf94a8ae2aecd13872bf9ce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves the data in the input window to free space for new data.  <a href="#a0ffebd3acf94a8ae2aecd13872bf9ce6">More...</a><br /></td></tr>
<tr class="separator:a0ffebd3acf94a8ae2aecd13872bf9ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af003fd0d53736a94b735eb04299ce08b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lz__encoder_8c.html#af003fd0d53736a94b735eb04299ce08b">fill_window</a> (<a class="el" href="structlzma__coder.html">lzma_coder</a> *coder, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const uint8_t *in, size_t *in_pos, size_t in_size, <a class="el" href="base_8h.html#aa92efcbf3cecfcac79c81fc645fce77e">lzma_action</a> action)</td></tr>
<tr class="memdesc:af003fd0d53736a94b735eb04299ce08b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to fill the input window (mf-&gt;buffer)  <a href="#af003fd0d53736a94b735eb04299ce08b">More...</a><br /></td></tr>
<tr class="separator:af003fd0d53736a94b735eb04299ce08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cbe9acd33a8d9006e85d00c60a448e9"><td class="memItemLeft" align="right" valign="top"><a id="a7cbe9acd33a8d9006e85d00c60a448e9"></a>
static <a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a>&#160;</td><td class="memItemRight" valign="bottom"><b>lz_encode</b> (void *coder_ptr, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const uint8_t *restrict in, size_t *restrict in_pos, size_t in_size, uint8_t *restrict out, size_t *restrict out_pos, size_t out_size, <a class="el" href="base_8h.html#aa92efcbf3cecfcac79c81fc645fce77e">lzma_action</a> action)</td></tr>
<tr class="separator:a7cbe9acd33a8d9006e85d00c60a448e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7db5539ffefad96f82eee5547bfc50e"><td class="memItemLeft" align="right" valign="top"><a id="ad7db5539ffefad96f82eee5547bfc50e"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>lz_encoder_prepare</b> (<a class="el" href="structlzma__mf__s.html">lzma_mf</a> *mf, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const <a class="el" href="structlzma__lz__options.html">lzma_lz_options</a> *lz_options)</td></tr>
<tr class="separator:ad7db5539ffefad96f82eee5547bfc50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab95e6dd72dc5508f2c33fd1a695b556d"><td class="memItemLeft" align="right" valign="top"><a id="ab95e6dd72dc5508f2c33fd1a695b556d"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>lz_encoder_init</b> (<a class="el" href="structlzma__mf__s.html">lzma_mf</a> *mf, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const <a class="el" href="structlzma__lz__options.html">lzma_lz_options</a> *lz_options)</td></tr>
<tr class="separator:ab95e6dd72dc5508f2c33fd1a695b556d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3748d94a78e951b0a2f3e38c21e8049"><td class="memItemLeft" align="right" valign="top"><a id="aa3748d94a78e951b0a2f3e38c21e8049"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>lzma_lz_encoder_memusage</b> (const <a class="el" href="structlzma__lz__options.html">lzma_lz_options</a> *lz_options)</td></tr>
<tr class="separator:aa3748d94a78e951b0a2f3e38c21e8049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934bb8b94afb89859c915ef5d11bd7cd"><td class="memItemLeft" align="right" valign="top"><a id="a934bb8b94afb89859c915ef5d11bd7cd"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>lz_encoder_end</b> (void *coder_ptr, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator)</td></tr>
<tr class="separator:a934bb8b94afb89859c915ef5d11bd7cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55de0453b1b1f8f94eb0a33facb93c56"><td class="memItemLeft" align="right" valign="top"><a id="a55de0453b1b1f8f94eb0a33facb93c56"></a>
static <a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a>&#160;</td><td class="memItemRight" valign="bottom"><b>lz_encoder_update</b> (void *coder_ptr, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const <a class="el" href="structlzma__filter.html">lzma_filter</a> *filters_null <a class="el" href="memcmplen_8h.html#a157d11c2c46feafcc7a602313ff1a1e6">lzma_attribute</a>((__unused__)), const <a class="el" href="structlzma__filter.html">lzma_filter</a> *reversed_filters)</td></tr>
<tr class="separator:a55de0453b1b1f8f94eb0a33facb93c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc2df5d5f56b80e7a7431e172b44c972"><td class="memItemLeft" align="right" valign="top"><a id="adc2df5d5f56b80e7a7431e172b44c972"></a>
<a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a>&#160;</td><td class="memItemRight" valign="bottom"><b>lzma_lz_encoder_init</b> (<a class="el" href="structlzma__next__coder__s.html">lzma_next_coder</a> *next, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const <a class="el" href="structlzma__filter__info__s.html">lzma_filter_info</a> *<a class="el" href="coder_8c.html#a9325236d5759d4eaadcba08a6bb5c96f">filters</a>, <a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a>(*lz_init)(<a class="el" href="structlzma__lz__encoder.html">lzma_lz_encoder</a> *lz, const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, const void *options, <a class="el" href="structlzma__lz__options.html">lzma_lz_options</a> *lz_options))</td></tr>
<tr class="separator:adc2df5d5f56b80e7a7431e172b44c972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98a84efebf5e7ff1e8ddb821fc676d3f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8h.html#abbc819c74b484c846825ae1388a50a59">lzma_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lz__encoder_8c.html#a98a84efebf5e7ff1e8ddb821fc676d3f">lzma_mf_is_supported</a> (<a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80">lzma_match_finder</a> mf)</td></tr>
<tr class="memdesc:a98a84efebf5e7ff1e8ddb821fc676d3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if given match finder is supported.  <a href="#a98a84efebf5e7ff1e8ddb821fc676d3f">More...</a><br /></td></tr>
<tr class="separator:a98a84efebf5e7ff1e8ddb821fc676d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>LZ in window. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0ffebd3acf94a8ae2aecd13872bf9ce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ffebd3acf94a8ae2aecd13872bf9ce6">&#9670;&nbsp;</a></span>move_window()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void move_window </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlzma__mf__s.html">lzma_mf</a> *&#160;</td>
          <td class="paramname"><em>mf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Moves the data in the input window to free space for new data. </p>
<p>mf-&gt;buffer is a sliding input window, which keeps mf-&gt;keep_size_before bytes of input history available all the time. Now and then we need to "slide" the buffer to make space for the new data to the end of the buffer. At the same time, data older than keep_size_before is dropped. </p>

</div>
</div>
<a id="af003fd0d53736a94b735eb04299ce08b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af003fd0d53736a94b735eb04299ce08b">&#9670;&nbsp;</a></span>fill_window()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a> fill_window </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlzma__coder.html">lzma_coder</a> *&#160;</td>
          <td class="paramname"><em>coder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>in_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>in_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_8h.html#aa92efcbf3cecfcac79c81fc645fce77e">lzma_action</a>&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to fill the input window (mf-&gt;buffer) </p>
<p>If we are the last encoder in the chain, our input data is in in[]. Otherwise we call the next filter in the chain to process in[] and write its output to mf-&gt;buffer.</p>
<p>This function must not be called once it has returned LZMA_STREAM_END. </p>

</div>
</div>
<a id="a98a84efebf5e7ff1e8ddb821fc676d3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98a84efebf5e7ff1e8ddb821fc676d3f">&#9670;&nbsp;</a></span>lzma_mf_is_supported()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8h.html#abbc819c74b484c846825ae1388a50a59">lzma_bool</a> lzma_mf_is_supported </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80">lzma_match_finder</a>&#160;</td>
          <td class="paramname"><em>match_finder</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test if given match finder is supported. </p>
<p>Return true if the given match finder is supported by this liblzma build. Otherwise false is returned. It is safe to call this with a value that isn't listed in lzma_match_finder enumeration; the return value will be false.</p>
<p>There is no way to list which match finders are available in this particular liblzma version and build. It would be useless, because a new match finder, which the application developer wasn't aware, could require giving additional options to the encoder that the older match finders don't need. </p>

<p class="reference">References <a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80a7ab212446c3f6520f5c33ccfa4b3386a">LZMA_MF_BT2</a>, <a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80a983ecc59bf3e07a7c43fea551ea11865">LZMA_MF_BT3</a>, <a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80a468c32cdea9861d1ff98478364e6c547">LZMA_MF_BT4</a>, <a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80a6eb38f634021a192cada8a978b5de93b">LZMA_MF_HC3</a>, and <a class="el" href="lzma12_8h.html#acf740075f86fa61dc408d6d0dbf8fa80a0944620f4949289c2ebde613cae12b04">LZMA_MF_HC4</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
